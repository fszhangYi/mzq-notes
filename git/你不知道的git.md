# 你不知道的git

Git作为版本控制系统，在软件开发过程中发挥着至关重要的作用。熟练地使用Git对提高开发效率有着直接的影响。在平常使用过程中，一些细节性的问题和小技巧常常被忽视，然而这些细节往往能解决许多开发过程中的难题。

## Git文件名大小写敏感设置

Git默认配置是在大小写不敏感的文件系统上工作，例如在Windows和Mac OS上。这意味着如果某文件仅改变了大小写，Git可能不会当作更改。要解决这个问题，可以通过下述指令修改Git的大小写敏感设置：

```shell
git config core.ignorecase false
```

这条命令设置`git`不忽略大小写，使其能够检测到大小写变更。当使用这个配置在大小写敏感的文件系统上（如Linux）工作时，Git将正确地跟踪文件名的大小写更改。



## 检出过去的文件状态

有时候需要查看一个文件的过去状态，但又不希望切换到那个历史提交。可以很容易地做到这一点：

```shell
git show commit_id:path/to/file > old_version_file
```

在这条命令中，`commit_id`是文件过去某个版本的提交哈希，而`path/to/file`则是在那次提交下的文件路径。这条命令将输出的老版本文件内容重定向到`old_version_file`文件中。

## 挑选修改加入暂存区

在进行多项修改后，有时只希望部分修改被加入下次提交。可以使用以下命令：

```shell
git add -p
```

`-p`是`patch`的缩写。此命令可以逐个查看每一处更改，然后询问是否要加入`stage`（暂存区）。这使得控制提交内容变得灵活而精确。

## 清理本地无效的远程分支跟踪

当远程仓库的分支被删除后，本地仍可能保留其跟踪分支。使用以下命令可以清理这些无效的分支跟踪：

```shell
git remote prune origin
```

这条命令会移除任何不再存在于远程但还存在于本地的跟踪分支。

## 查找造成问题的提交

当代码库中出现Bug时，通常需要找出是哪次提交引入了这个问题，使用`git bisect`可以进行二分查找，快速定位到问题的提交：

```shell
git bisect start
git bisect bad             # 标记当前位置为异常
git bisect good commit_id  # 标记某个提交为正常
# git会自动检出一半的提交点让你进行测试
git bisect good|bad        # 对新的提交进行标记，直到找到问题提交
git bisect reset           # 结束bisect状态，回到原始分支
```

这个命令利用了二分搜索，迅速缩小搜寻范围，并最终查找到引入问题的提交。

## 只合并代码，不进行提交

合并大型的分支时，有时希望先手动评审合并的结果。可以使用以下命令来禁止合并后的自动提交：

```shell
git merge --no-commit branch_name
```

使用此命令合并分支时，合并结果不会自动创建新的提交，方便在提交前手动检查和调整。

## 通过交互式rebase清理提交历史

交互式rebase是Git非常强大的功能之一。它可以用来编辑、删除、合并或者重排序提交。下面是使用交互式rebase的一个例子：

```shell
git rebase -i HEAD~5
```

该命令会在默认的文本编辑器中打开最近5次的提交，并允许通过不同命令行来改变这些提交，例如通过`pick`、`squash`、`edit`等命令。这使得个人的提交历史保持干净整洁，方便代码审查和理解。

## 写在最后

Git不仅仅是一个版本控制工具，它所拥有的功能和特性对提升代码质量、开发效率以及团队合作有非常重要的作用。上述介绍的六个Git小技巧，从处理文件名大小写敏感问题到合理利用各种进阶命令，为日常的版本控制工作带来便利。熟练地运用这些技巧将有助于更高效地管理代码库，也能够在团队协作中减少潜在的问题。正确地运用这些技巧需要对Git有深入的理解，故不断学习和探索Git的深层次功能是提升开发能力的重要途径。