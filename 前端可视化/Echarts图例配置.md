# Echarts图例配置

图例（Legend）在数据可视化中起到至关重要的作用，它不仅帮助用户区分图表中的不同数据系列，还能提供一个简洁明了的数据类别指示。Echarts图表库中的图例配置丰富而详细，本文将深入探讨在折线图、饼图和柱状图这三种常见图形中对图例的配置方法。

## 图例基础配置

首先来看一下Echarts图例的基本配置项：

```javascript
option = {
  legend: {
    show: true, // 显示图例
    orient: 'horizontal', // 图例排列方式
    x: 'center', // 图例的水平位置
    y: 'top', // 图例的垂直位置
    padding: 5, // 图例内边距
    itemGap: 10, // 图例每项之间的间隔
    data: ['数据系列1', '数据系列2', '数据系列3'] // 图例数据
  }
  // ...其他图表配置
};
```

在Echarts的配置中，图例的属性可以高度自定义。其中`show`属性控制是否显示图例，`orient`属性定义了图例的排列方向——水平或者垂直；`x`和`y`属性定义了图例的位置，可以设置为`'center'`, `'left'`, `'right'`, `'top'`, `'bottom'`，也可以使用数值指定具体像素；`padding`和`itemGap`属性则用于控制图例内部的间距和图例项之间的间隔距离；`data`属性则明确了要显示哪些数据系列的图例。

## 图例在不同图形中的应用

接下来，本文会以折线图、饼图和柱状图来具体展示Echarts图例的配置方式。

### 折线图中的图例配置

在折线图中，图例能够帮助用户区分不同数据线：

```javascript
option = {
  // ...折线图其他配置...
  legend: {
    data:['邮件营销','联盟广告','视频广告']
  },
  series: [
    {
      name: '邮件营销',
      type: 'line',
      // ...数据配置...
    },
    {
      name: '联盟广告',
      type: 'line',
      // ...数据配置...
    },
    {
      name: '视频广告',
      type: 'line',
      // ...数据配置...
    }
  ]
};
```

在此配置中，`legend.data`数组中的每个元素应与`series`中的`name`属性相匹配。这样，每个折线的名称就会在图例中正确显示，用户可以通过点击图例来控制是否显示对应的数据系列。

### 饼图中的图例配置

饼图中的图例主要用于标示每个扇区所代表的数据类别：

```javascript
option = {
  // ...饼图其他配置...
  legend: {
    orient: 'vertical',
    x: 'left',
    data: ['直接访问','邮件营销','联盟广告','视频广告','搜索引擎']
  },
  series: [
    {
      name: '访问来源',
      type: 'pie',
      radius: '55%',
      center: ['40%', '50%'],
      data: [
        // ...每个扇区的数据...
      ],
      // ...其他饼图配置...
    }
  ]
};
```

这里的图例配置中，`orient`设置为`'vertical'`，使得图例垂直排列；`x`设置为`'left'`，使得图例显示在左侧，方便用户查看每个颜色代表的数据类别。

### 柱状图中的图例配置

在柱状图中，图例同样重要，它表示的是不同系列的柱子所代表的数据维度：

```javascript
option = {
  // ...柱状图其他配置...
  legend: {
    data: ['蒸发量','降水量','平均温度']
  },
  series: [
    {
      name: '蒸发量',
      type: 'bar',
      data: [2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3],
      // ...柱状图配置...
    },
    {
      name: '降水量',
      type: 'bar',
      data: [2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3],
      // ...柱状图配置...
    },
    {
      name: '平均温度',
      type: 'bar',
      yAxisIndex: 1,
      data: [2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4, 23.0, 16.5, 12.0, 6.2],
      // ...柱状图配置...
    }
  ]
};
```

在柱状图的配置中，`legend.data`与系列中的`name`属性进行了关联，通过图例用户可以选择性地查看各个数据系列。

## 高级图例配置

除了基本的显示、位置、布局设置，Echarts的图例还支持更加复杂的自定义，例如样式、图例翻页、状态管理等。

### 样式定制配置项

图例的文字样式和图标样式都可以进行定制：

```javascript
option = {
  legend: {
    // ...其他图例配置...
    textStyle: {
      color: 'red', // 图例文字的颜色
      fontSize: 16 // 图例文字的字号大小
    },
    itemWidth: 40, // 图例图标的宽度
    itemHeight: 20 // 图例图标的高度
  },
  // ...其他图表配置
};
```

通过上述属性，可以让图例的样式与整体的图表设计风格保持一致，也可以扩展图例的视觉表现性。

### 图例翻页配置项

当图例项较多时，可以设置图例的翻页功能：

```javascript
option = {
  legend: {
    type: 'scroll', // 启用滚动翻页的图例类型
    pageButtonItemGap: 5, // 翻页按钮与图例项的间隔
    pageButtonPosition: 'end', // 翻页按钮的布局位置
    pageFormatter: '{current}/{total}', // 自定义翻页控件的格式
    // ...其他图例配置...
  }
  // ...其他图表配置
};
```

使用`type: 'scroll'`选项，可以开启图例的翻页功能。`pageButtonItemGap`, `pageButtonPosition`, `pageFormatter`等属性可以进一步定制翻页控件的布局和显示内容。

### 状态管理配置项

图例支持`selected`属性来管理各个系列的选中状态：

```javascript
option = {
  legend: {
    // ...其他图例配置...
    selected: {
      '邮件营销': true, // 默认显示
      '联盟广告': false // 默认不显示
    }
  },
  // ...其他图表配置
};
```

在初始化时，可以配置哪些图表系列是被选中的（默认显示），哪些是未选中的（默认隐藏）。用户可以通过点击图例来修改这些状态。

## 总结

通过图例配置，可以大幅增强Echarts图表的交互性和可读性。Echarts提供了丰富的图例配置项，使得数据可视化开发者可以为用户提供清晰的数据导向和个性化的视觉体验。无论是简单的折线图、直观的饼图还是多维度的柱状图，精确而合理的图例配置都是提高图表信息表达力的关键。学会如何利用Echarts的图例配置，将是优化图表设计和增强用户体验的重要手段。