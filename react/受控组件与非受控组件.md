# 受控组件与非受控组件的选用指南

在现代前端开发中，尤其是在使用如React这样的库来构建用户界面时，受控组件和非受控组件是管理表单输入的两种主要方法。它们之间的关键区别在于数据的管理方式。了解何时使用受控组件和非受控组件对于创建可维护且高效的表单至关重要。

## 什么是非受控组件？

非受控组件是一种将表单数据的管理直接留给DOM的方式。在非受控组件中，你通常会使用`ref`来直接从DOM元素中获取值，而不是每次更改时更新state。

以下是非受控组件的简单图解：

![非受控组件图解](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a38c839509aa481a971117211af740c9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=604&h=300&s=109878&e=png&b=24282c)

非受控组件的优点在于实现起来相对简单，对于不需要紧密控制用户输入的表单，这可以是一个快速的解决方案。

## 什么是受控组件？

受控组件则是通过组件的状态进行数据管理的方法。在受控组件中，表单元素的值被React的state所控制，这意味着表单的值将始终与state同步。

以下是受控组件的简单图解：

![受控组件图解](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8778f706db6e4a149942a9ff811abe90~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=877&h=355&s=142003&e=png&b=24282c)

受控组件允许你以一种声明式的方式处理表单的输入，可以轻松地将表单输入与其他UI元素关联起来，实现更复杂的交互。

## 如何选用？

在决定使用受控组件还是非受控组件时，你可以考虑以下因素：

- 如果你需要实时地校验用户的输入，受控组件可以更容易地实现。
- 当你需要对输入进行格式化处理（如货币格式化）时，受控组件能提供对值更精细的控制。
- 若表单有多个入口处需要修改state时，受控组件能够保持state的一致性。
- 如果表单提交需要依据用户输入满足特定条件，受控组件能够根据state轻松地启用或禁用提交按钮。

以下是分析选择受控组件或非受控组件的参考图：

![选择参考图](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/602914662ed541d2afba4030f4b3314f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=806&h=273&s=91669&e=png&b=373b41)

**个人总结**：随着时间的推进至3202年，在开发时选择非受控组件似乎已经不太常见。受控组件在实现各种具有挑战性的表单功能时展示出其强大的优势，尤其是在需要验证、格式化、多输入入口以及有条件提交的场景下。随着开发工具和库的不断进步，受控组件的使用将变得更加便捷和高效。